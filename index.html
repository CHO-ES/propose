<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>나의 결혼 프로포즈</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <audio id="bgm" src="music/proposemusic.mp3" loop></audio>

  <div id="app">
    <div class="container" id="home">
      <h1>사랑하는 한비에게</h1>
      <p>
        할 말이 있어<br>
        내 얘기 들어줄래?
      </p>
      <button class="yes" onclick="answerYes()">응, 알겠어</button>
      <button class="no" onclick="answerSorry()">아니</button>
    </div>
  </div>

  <div id="heartEffect"></div>

  <script>
    let pages = [];
    let pageIndex = 0;

    let slideTimer = null;

    function initSlideshow() {
      const slides = document.querySelectorAll(".slide");
      if (slides.length === 0) return;

      let index = 0;

      slides.forEach((s, i) => {
        s.classList.toggle("active", i === 0);
      });

      clearInterval(slideTimer);

      slideTimer = setInterval(() => {
        slides[index].classList.remove("active");
        index = (index + 1) % slides.length;
        slides[index].classList.add("active");
      }, 1800);
    }

    function answerYes() {
      const bgm = document.getElementById("bgm");
      bgm.volume = 0.4;
      bgm.play().catch(() => {});

      pages = [
        {
          html: `
            <div class="container">
              <p>
                많이 미흡하고 서툴지만<br>
                천천히 봐줘..
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="media">
                <img src="img/20250704.jpg" class="result-img">
              </div>
              <p>
                우리는 우연치 않은 만남을 시작으로<br>
                25년 6월 22일에 사귀기 시작했어
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="media">
                <img src="img/20251210.jpg" class="result-img">
              </div>
              <p>
                나의 삶은 한비를 만나기 전후로 나뉘는거 같아<br>
                더 좋은 사람이 되고 싶다고 생각했어
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="media">
                <img src="img/20251225.jpg" class="result-img">
              </div>
              <p>
                한비와 함께라면 어떤 하루가 와도<br>
                즐겁고 행복하게 보낼 수 있을 거 같아
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <p>
                우리가 같이 살아가면<br>
                다투는 날도 있겠지
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <p>
                그래도 나는<br>
                한비랑 계속 함께 하고 싶어
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="slideshow">
                <img src="img/map.jpg" class="slide active">
                <img src="img/slide4.jpg" class="slide">
                <img src="img/slide5.jpg" class="slide">
              </div>
              <p>우리 함께 다양한 곳을 같이 다니면서</p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="slideshow">
                <img src="img/slide1.jpg" class="slide active">
                <img src="img/slide2.jpg" class="slide">
                <img src="img/slide3.jpg" class="slide">
              </div>
              <p>앞으로도 계속 같이 달리자</p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <p>
                이제는 연인이 아니라<br>
                가족으로 평생을 함께 하고 싶어
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <p>
                이런 나라도 괜찮으면…
              </p>
              <button class="yes" onclick="nextPage()">다음</button>
            </div>
          `
        },
        {
          html: `
            <div class="container">
              <div class="media">
                <img src="img/20251209.jpg" class="result-img">
              </div>
              <h1>나랑 결혼해줄래?</h1>
              <button class="yes" onclick="goMarry()">그래 ❤️</button>
              <button class="no" onclick="answerNo()">아니</button>
            </div>
          `
        }
      ];

      pageIndex = 0;
      renderPage();
    }

    function renderPage() {
      document.getElementById("app").innerHTML = pages[pageIndex].html;
      initSlideshow();
    }

    function nextPage() {
      pageIndex++;
      if (pageIndex < pages.length) renderPage();
    }

    function goMarry() {
      document.getElementById("app").innerHTML = `
        <div class="container">
          <p>
            고마워… ❤️<br>
            평생 한비를 웃게 할게
          </p>
          <h1>💖 사랑해 💖</h1>
        </div>
      `;
    }

    function answerNo() {
      alert("다시 한 번만 생각해줄래… 🥹");
    }

    function answerSorry() {
      alert("한번만 들어주면 안될까..?");
    }
  </script>

</body>
</html>
